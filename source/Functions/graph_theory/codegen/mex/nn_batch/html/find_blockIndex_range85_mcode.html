<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="45,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T6U3">start</span>,<span class="var type1" id="S3T6U4">stop</span>] = find_blockIndex_range( <span class="var type1" id="S4T2U7">n</span>,<span class="var type1" id="S5T2U8">m</span>,<span class="var type1" id="S6T2U9">maxSize</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="45,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% [start,stop] = find_indexing_range( n,m,(maxSize) )</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% find the indexing ranges to perform block looping over points "1:m" for </span></span></span>
<span class="srcline"><span class="lineno"><a href="45,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% nearest-neighbor, etc. This greatly improves performance (not looping over </span></span></span>
<span class="srcline"><span class="lineno"><a href="45,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% all points) while avoiding massive (&gt; 1 GB) matrices. Default "maxSize",</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% which refers to the maximum matrix size allowed, is 100,000,000 entries.</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">% "n" refers to number of elements in first vector, "m" refers to number of</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,10" id="srcline10">10</a></span><span class="line"><span class="comment">% elements in second. This is more flexible than simply providing one</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,11" id="srcline11">11</a></span><span class="line"><span class="comment">% number, as neighborhood graphs etc. may not necessarily be square.</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="45,13" id="srcline13">13</a></span><span class="line"><span class="keyword">if</span> nargin &lt; 3</span></span>
<span class="srcline"><span class="lineno"><a href="45,14" id="srcline14">14</a></span><span class="line">    <span class="mxinfo " id="T2:U6"><span class="var type1" id="S6T2U18">maxSize</span> = <span class="mxinfo " id="T2:U8">100000000</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,15" id="srcline15">15</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,16" id="srcline16">16</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="45,17" id="srcline17">17</a></span><span class="line"><span class="comment">% get max Pts possible</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T2:U9"><span class="var type1" id="S8T2U22">maxPts</span> = <span class="mxinfo " id="T2:U11">floor( <span class="mxinfo " id="T2:U12"><span class="var type1" id="S6T2U26">maxSize</span> / <span class="var type1" id="S4T2U27">n</span></span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,19" id="srcline19">19</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T3:U15"><span class="var type1" id="S8T2U31">maxPts</span> &lt; <span class="var type1" id="S5T2U32">m</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="45,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T2:U18"><span class="var type1" id="S10T2U35">remainder</span> = <span class="mxinfo " id="T2:U20">mod( <span class="var type1" id="S5T2U38">m</span>,<span class="var type1" id="S8T2U39">maxPts</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T6:U23"><span class="var type1" id="S12T6U42">tempStart</span> = <span class="mxinfo " id="T6:U25">1:<span class="var type1" id="S8T2U46">maxPts</span>:<span class="mxinfo " id="T2:U27"><span class="var type1" id="S5T2U48">m</span>-<span class="var type1" id="S10T2U49">remainder</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T6:U30"><span class="var type1" id="S13T6U52">tempStop</span> = <span class="mxinfo " id="T6:U32"><span class="var type1" id="S8T2U55">maxPts</span>:<span class="var type1" id="S8T2U56">maxPts</span>:<span class="mxinfo " id="T2:U35"><span class="var type1" id="S5T2U58">m</span>-<span class="var type1" id="S10T2U59">remainder</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,23" id="srcline23">23</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T3:U38"><span class="var type1" id="S10T2U63">remainder</span> &gt; <span class="mxinfo " id="T2:U40">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="45,24" id="srcline24">24</a></span><span class="line">        <span class="mxinfo " id="T6:U41"><span class="var type1" id="S2T6U67">start</span> = <span class="mxinfo " id="T6:U43">[<span class="var type1" id="S12T6U70">tempStart</span>,<span class="mxinfo " id="T2:U45"><span class="mxinfo " id="T2:U46"><span class="var type1" id="S12T6U73">tempStart</span>(<span class="mxinfo " id="T2:U48">end</span>)</span>+<span class="var type1" id="S10T2U76">remainder</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,25" id="srcline25">25</a></span><span class="line">        <span class="mxinfo " id="T6:U50"><span class="var type1" id="S3T6U79">stop</span> = <span class="mxinfo " id="T6:U52">[<span class="var type1" id="S13T6U82">tempStop</span>,<span class="var type1" id="S5T2U83">m</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,26" id="srcline26">26</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,27" id="srcline27">27</a></span><span class="line">        <span class="mxinfo " id="T6:U55"><span class="var type1" id="S2T6U87">start</span> = <span class="var type1" id="S12T6U88">tempStart</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,28" id="srcline28">28</a></span><span class="line">        <span class="mxinfo " id="T6:U58"><span class="var type1" id="S3T6U91">stop</span> = <span class="var type1" id="S13T6U92">tempStop</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,29" id="srcline29">29</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,30" id="srcline30">30</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,31" id="srcline31">31</a></span><span class="line">    <span class="mxinfo " id="T6:U61"><span class="var type1" id="S2T6U96">start</span> = <span class="mxinfo " id="T2:U63">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,32" id="srcline32">32</a></span><span class="line">    <span class="mxinfo " id="T6:U64"><span class="var type1" id="S3T6U100">stop</span> = <span class="var type1" id="S5T2U101">m</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="45,33" id="srcline33">33</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="45,34" id="srcline34">34</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="45,35" id="srcline35">35</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
